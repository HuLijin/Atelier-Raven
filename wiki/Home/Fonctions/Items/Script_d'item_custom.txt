Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2015-09-08T18:13:48+02:00

====== Script d'item custom ======

Script basique : il permet d'interagir avec les 4 items définis dans la item_data fournie en exemple.
Les effets des 4 items sont à définir par l'utilisateur (par exemple, on pourrait placer un AddScore(10) ou toute autre fonction similaire).
L'item 4 sert d'exemple dans le cas où il faut transformer tous les bullets en item Point.

Lorsqu'on utilise un script custom, les items par défaut ne sont plus fonctionnels. Le script custom écrase le script par défaut. (à vérifier)

'''
@Initialize{
	SetDefaultBonusItemEnable(false);
	let dir = GetCurrentScriptDirectory();
	LoadItemData(GetCurrentScriptDirectory() ~ "nom_du_fichier_item_data.dnh");
}

@MainLoop{
	yield;
}

@Event{
	alternative(GetEventType())
	case(EV_GET_ITEM){
        	let dir = GetCurrentScriptDirectory();
		let itemType = GetEventArgument(0); 	//object ID
		alternative(itemType)
		case(1){ /*code relatif au premier item*/ }
		case(2){ /*code relatif au premier item*/ }
		case(3){ /*code relatif au premier item*/ }
		case(4){ /*code relatif au premier item*/ }

	case(EV_DELETE_SHOT_TO_ITEM){
		let objShot = GetEventArgument(0); //????????
		let objPos = GetEventArgument(1); //([0]=x, [1]=y)
		let dir = GetCurrentScriptDirectory();
		let obj = CreateItemU1(4, objPos[0], objPos[1], 100);
		ObjItem_SetDefinedMovePatternA1(obj, ITEM_MOVE_TOPLAYER);
	}
}
'''
