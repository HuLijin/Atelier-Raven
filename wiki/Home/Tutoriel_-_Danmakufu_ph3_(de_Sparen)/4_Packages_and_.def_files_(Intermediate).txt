Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2015-09-01T17:01:34+02:00

====== 4 Packages and .def files (Intermediate) ======

**Packages are a brand new type of script introduced in ph3. Here, you can create menus with some ease, have player select menus, and bypass the start screen using a .def file.** Note that packages are still a royal pain to learn, although once you get the hang of text objects and virtual key input, it becomes much more simple.

**You start a package with something similar to the following:**

'''
#TouhouDanmakufu[Package]  
#Title["Digital Earth: Conquest"]
#Text["Digital Earth: Conquest[r]Package"]
'''


**Do note that you CANNOT call #System, #Background, and other such things in a Package script. In the @Initialize of a package, you may want to load any config AreaCommonData from save files or create the CommonData Areas if they do not exist. For example:**

''if(!LoadCommonDataAreaA2("Config", GetCurrentScriptDirectory~"data/Config.dat")) { CreateCommonDataArea("Config"); }''

**Also, it is highly recommended that you install all necessary fonts used in the package in the @Initialize. Your @MainLoop should have a yield; in it.**

Most of your menu panes will be made up text objects and scene tasks. **It is recommended that you have a separate file for the Replay Select scene since it can get extremely complicated.** It is best to build off of the existing package default script in the ExRumia folder that comes with ph3. **It is also recommended that you yield the start of the scene tasks so that players trying to go back one menu don't accidentally go back multiple menus.**

**It is also recommended that you define constants for the indexes of each menu item so that things are easier to read.** Make sure you have a good understanding of 2D Sprite Objects, Text Objects, and AreaCommonData before you try to create your first package, as it will make your time with packages much easier.


===== Def Files (Intermediate) =====

**In the GetModuleDirectory (the directory with th_dnh.exe), there should be a th_dnh.def file.**

'''
package.script.main = script/ExRumia/ExRumia_Package_Main.txt
window.title = DIGITAL EARTH: CONQUEST
screen.width=640
'''


**The following are examples of commands used in the .def file. The package.script.main makes the selected package path load on startup of th_dnh.exe. The window.title is the title of the window (notably, you do not need "" to mark these things as strings, and you don't need semicolons. Comments are still done with //). Screen width and height can also be edited this way.**
